@model Bitcraft.ResourceFinder.Web.Models.Resource
@{
    ViewData["Title"] = "Add Image";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 class="mb-3">Add Image for “@Model.Name”</h2>

<form method="post" enctype="multipart/form-data" action="@Url.Content($"~/resources/{Model.Id}/add-image")">
    @Html.AntiForgeryToken()

    <div class="mb-3">
        <!-- The cropper auto-finds its host form; fieldName= image -->
        <div class="ic512-widget" data-field="image"></div>
        <small class="text-muted d-block mt-2">Upload, paste, or URL via the cropper. Exports 512×512 WebP (client-side capped at 500 KB).</small>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
    <a href="@Url.Action("Index", "Resources")" class="btn btn-outline-secondary ms-2">Cancel</a>
</form>

@section Scripts {
    <script src="~/js/image-crop-512.js"></script>
    <script>
        // Initialize cropper on this page; it will intercept submit and post WebP as the "image" field.
        window.initImageCrop512('.ic512-widget');
    </script>
}
